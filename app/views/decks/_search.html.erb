<div class="container text-center my-3">
  <h3 id="search-header"><%= @decks.count %> decks matches your search!</h3>
  <div class="deck-header">
    <div>Deck</div>
    <div>Creator</div>
    <div>N° of cards</div>
    <div>Users</div>
    <div>Rating</div>
  </div>

  <% @decks.each do |deck| %>
    <div class="card-product">
      <% if deck.deck_pic.attached? %>
        <% #cloudinary image, transformation, css configs %>
        <%= cl_image_tag(deck.deck_pic.key,
        :transformation=>[{:width=>100, :height=>100, :gravity=>"face", :radius=>"max", :crop=>"thumb"}],
        class: "avatar dropdown-toggle", id: "navbarDropdown", data: { toggle: "dropdown" }, 'aria-haspopup': true, 'aria-expanded': false )%>
      <% else %>
        <img src="https://images-platform.99static.com//yMu615t0H7ZoE7NAZn48S48DZGY=/350x309:851x810/fit-in/590x590/99designs-contests-attachments/90/90852/attachment_90852898" />
      <% end %>
        <div class="card-product-infos">
          <div >
            <%= link_to "#{deck.title}", show_path(deck) %>
          </div>

          <div style="padding-left: 10px">
            <%= User.find(deck.user_id).name %>
          </div>

          <div style="padding-left: 10px">
            <%= Card.where(deck_id: deck.id).count %>
          </div>

          <div style="padding-left: 10px">
            <%= deck.price %>
          </div>

          <div style="padding-left: 70px">
            <% rating = 0 %>
            <% deck.deck_reviews.each do |review|  %>
              <% rating += review.rating %>
            <% end %>
            <% if deck.deck_reviews.empty?%>
            --
            <% else %>
              <%= "⭐"*(rating/deck.deck_reviews.count) %>
            <% end %>
          </div>
        </div>
    </div>
  <% end %>
</div>
